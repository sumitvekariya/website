"use strict";(self.webpackChunk_semaphore_protocol_website=self.webpackChunk_semaphore_protocol_website||[]).push([[618],{3905:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return h}});var r=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=r.createContext({}),u=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},p=function(e){var n=u(e.components);return r.createElement(s.Provider,{value:n},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=u(t),m=o,h=d["".concat(s,".").concat(m)]||d[m]||c[m]||a;return t?r.createElement(h,l(l({ref:n},p),{},{components:t})):r.createElement(h,l({ref:n},p))}));function h(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,l=new Array(a);l[0]=m;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i[d]="string"==typeof e?e:o,l[1]=i;for(var u=2;u<a;u++)l[u]=t[u];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},5162:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(7294),o=t(6010),a="tabItem_Ymn6";function l(e){let{children:n,hidden:t,className:l}=e;return r.createElement("div",{role:"tabpanel",className:(0,o.Z)(a,l),hidden:t},n)}},5488:function(e,n,t){t.d(n,{Z:function(){return m}});var r=t(3117),o=t(7294),a=t(6010),l=t(2389),i=t(7392),s=t(7094),u=t(2466),p="tabList__CuJ",d="tabItem_LNqP";function c(e){const{lazy:n,block:t,defaultValue:l,values:c,groupId:m,className:h}=e,f=o.Children.map(e.children,(e=>{if((0,o.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),g=c??f.map((e=>{let{props:{value:n,label:t,attributes:r}}=e;return{value:n,label:t,attributes:r}})),b=(0,i.l)(g,((e,n)=>e.value===n.value));if(b.length>0)throw new Error(`Docusaurus error: Duplicate values "${b.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const k=null===l?l:l??f.find((e=>e.props.default))?.props.value??f[0].props.value;if(null!==k&&!g.some((e=>e.value===k)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${k}" but none of its children has the corresponding value. Available values are: ${g.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:v,setTabGroupChoices:y}=(0,s.U)(),[N,w]=(0,o.useState)(k),x=[],{blockElementScrollPositionUntilNextRender:j}=(0,u.o5)();if(null!=m){const e=v[m];null!=e&&e!==N&&g.some((n=>n.value===e))&&w(e)}const C=e=>{const n=e.currentTarget,t=x.indexOf(n),r=g[t].value;r!==N&&(j(n),w(r),null!=m&&y(m,String(r)))},T=e=>{let n=null;switch(e.key){case"Enter":C(e);break;case"ArrowRight":{const t=x.indexOf(e.currentTarget)+1;n=x[t]??x[0];break}case"ArrowLeft":{const t=x.indexOf(e.currentTarget)-1;n=x[t]??x[x.length-1];break}}n?.focus()};return o.createElement("div",{className:(0,a.Z)("tabs-container",p)},o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.Z)("tabs",{"tabs--block":t},h)},g.map((e=>{let{value:n,label:t,attributes:l}=e;return o.createElement("li",(0,r.Z)({role:"tab",tabIndex:N===n?0:-1,"aria-selected":N===n,key:n,ref:e=>x.push(e),onKeyDown:T,onClick:C},l,{className:(0,a.Z)("tabs__item",d,l?.className,{"tabs__item--active":N===n})}),t??n)}))),n?(0,o.cloneElement)(f.filter((e=>e.props.value===N))[0],{className:"margin-top--md"}):o.createElement("div",{className:"margin-top--md"},f.map(((e,n)=>(0,o.cloneElement)(e,{key:n,hidden:e.props.value!==N})))))}function m(e){const n=(0,l.Z)();return o.createElement(c,(0,r.Z)({key:String(n)},e))}},4896:function(e,n,t){t.r(n),t.d(n,{assets:function(){return p},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return i},metadata:function(){return u},toc:function(){return d}});var r=t(3117),o=(t(7294),t(3905)),a=t(5488),l=t(5162);const i={sidebar_position:11},s="Troubleshooting",u={unversionedId:"troubleshooting",id:"version-V3/troubleshooting",title:"Troubleshooting",description:"If these suggestions do not work, feel free to ask in the Semaphore Discussions or in the dev-chat channel in the Semaphore Discord.",source:"@site/versioned_docs/version-V3/troubleshooting.mdx",sourceDirName:".",slug:"/troubleshooting",permalink:"/docs/troubleshooting",draft:!1,editUrl:"https://github.com/semaphore-protocol/website/edit/main/versioned_docs/version-V3/troubleshooting.mdx",tags:[],version:"V3",sidebarPosition:11,frontMatter:{sidebar_position:11},sidebar:"version-V3/mySidebar",previous:{title:"Credits",permalink:"/docs/credits"}},p={},d=[{value:"Using Semaphore in the frontend",id:"using-semaphore-in-the-frontend",level:2},{value:"Semaphore with Nextjs",id:"semaphore-with-nextjs",level:3},{value:"Semaphore with React + Vite or Vuejs + Vite",id:"semaphore-with-react--vite-or-vuejs--vite",level:3},{value:"Semaphore Groups",id:"semaphore-groups",level:2},{value:"Creating a Group",id:"creating-a-group",level:3},{value:"Semaphore Proofs",id:"semaphore-proofs",level:2},{value:"Transaction reverted when using the same external nullifier",id:"transaction-reverted-when-using-the-same-external-nullifier",level:3}],c={toc:d};function m(e){let{components:n,...t}=e;return(0,o.kt)("wrapper",(0,r.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"troubleshooting"},"Troubleshooting"),(0,o.kt)("p",null,"If these suggestions do not work, feel free to ask in the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/semaphore-protocol/semaphore/discussions"},"Semaphore Discussions")," or in the ",(0,o.kt)("inlineCode",{parentName:"p"},"dev-chat")," channel in the ",(0,o.kt)("a",{parentName:"p",href:"https://semaphore.pse.dev/discord"},"Semaphore Discord"),"."),(0,o.kt)("h2",{id:"using-semaphore-in-the-frontend"},"Using Semaphore in the frontend"),(0,o.kt)("p",null,"Semaphore works with any JavaScript frontend framework, but the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/semaphore-protocol/semaphore/tree/main/packages/proof"},(0,o.kt)("inlineCode",{parentName:"a"},"@semaphore-protocol/proof"))," package is using ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/iden3/snarkjs"},"snarkjs"),", which uses Node.js modules which are not compatible with frontend frameworks and there are some changes that we need to do to make it work on the client side."),(0,o.kt)("h3",{id:"semaphore-with-nextjs"},"Semaphore with Nextjs"),(0,o.kt)("p",null,"You will see an error like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Module not found: Can't resolve 'fs'\n")),(0,o.kt)("p",null,"To solve this, in your ",(0,o.kt)("inlineCode",{parentName:"p"},"next.config.js")," file, inside the ",(0,o.kt)("inlineCode",{parentName:"p"},"nextConfig")," object, add:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"webpack: (config, { isServer }) => {\n    if (!isServer) {\n      config.resolve.fallback = {\n        fs: false\n      }\n    }\n\n    return config\n  }\n")),(0,o.kt)("p",null,"Your ",(0,o.kt)("inlineCode",{parentName:"p"},"next.config.js")," file would be something like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"/** @type {import('next').NextConfig} */\nconst nextConfig = {\n    reactStrictMode: true,\n    webpack: (config, { isServer }) => {\n        if (!isServer) {\n            config.resolve.fallback = {\n                fs: false\n            }\n        }\n\n        return config\n    }\n}\n\nmodule.exports = nextConfig\n")),(0,o.kt)("h3",{id:"semaphore-with-react--vite-or-vuejs--vite"},"Semaphore with React + Vite or Vuejs + Vite"),(0,o.kt)("p",null,"You will see an error like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"readman.js:43 Uncaught ReferenceError: process is not defined\n    at stringToBase64 (threadman.js:43:5)\n    at threadman.js:50:22\n")),(0,o.kt)("p",null,"To solve that:"),(0,o.kt)("p",null,"1- Install ",(0,o.kt)("inlineCode",{parentName:"p"},"@esbuild-plugins/node-globals-polyfill")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"@esbuild-plugins/node-modules-polyfill")),(0,o.kt)(a.Z,{defaultValue:"npm",groupId:"package-managers",values:[{label:"npm",value:"npm"},{label:"Yarn",value:"yarn"}],mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"npm",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm install @esbuild-plugins/node-globals-polyfill\n"))),(0,o.kt)(l.Z,{value:"yarn",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add @esbuild-plugins/node-globals-polyfill\n")))),(0,o.kt)(a.Z,{defaultValue:"npm",groupId:"package-managers",values:[{label:"npm",value:"npm"},{label:"Yarn",value:"yarn"}],mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"npm",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm install @esbuild-plugins/node-modules-polyfill\n"))),(0,o.kt)(l.Z,{value:"yarn",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add @esbuild-plugins/node-modules-polyfill\n")))),(0,o.kt)("p",null,"2- Modify the ",(0,o.kt)("inlineCode",{parentName:"p"},"vite.config.ts")," to add them:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},'import { NodeGlobalsPolyfillPlugin } from "@esbuild-plugins/node-globals-polyfill"\nimport { NodeModulesPolyfillPlugin } from "@esbuild-plugins/node-modules-polyfill"\n')),(0,o.kt)("p",null,"and in ",(0,o.kt)("inlineCode",{parentName:"p"},"defineConfig")," add:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"optimizeDeps: {\n    esbuildOptions: {\n        // Enable esbuild polyfill plugins\n        plugins: [\n            NodeGlobalsPolyfillPlugin({\n                process: true,\n                buffer: true\n            }),\n            NodeModulesPolyfillPlugin()\n        ]\n    }\n}\n")),(0,o.kt)("p",null,"Your ",(0,o.kt)("inlineCode",{parentName:"p"},"vite.config.ts")," should be something like:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},'import { fileURLToPath, URL } from "node:url"\n\nimport { defineConfig } from "vite"\nimport vue from "@vitejs/plugin-vue"\n\nimport { NodeGlobalsPolyfillPlugin } from "@esbuild-plugins/node-globals-polyfill"\nimport { NodeModulesPolyfillPlugin } from "@esbuild-plugins/node-modules-polyfill"\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n    plugins: [vue()],\n    resolve: {\n        alias: {\n            "@": fileURLToPath(new URL("./src", import.meta.url))\n        }\n    },\n    optimizeDeps: {\n        esbuildOptions: {\n            // Enable esbuild polyfill plugins\n            plugins: [\n                NodeGlobalsPolyfillPlugin({\n                    process: true,\n                    buffer: true\n                }),\n                NodeModulesPolyfillPlugin()\n            ]\n        }\n    }\n})\n')),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"In case of React with Vite, if you see a red wavy underline on every Semaphore module which says ",(0,o.kt)("inlineCode",{parentName:"p"},"Could not find a declaration file for module ..."),", change the ",(0,o.kt)("inlineCode",{parentName:"p"},"moduleResolution")," from ",(0,o.kt)("inlineCode",{parentName:"p"},"bundler")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"Node")," in the ",(0,o.kt)("inlineCode",{parentName:"p"},"tsconfig.json")," file inside ",(0,o.kt)("inlineCode",{parentName:"p"},"compilerOptions"),"."),(0,o.kt)("p",{parentName:"admonition"},"Your ",(0,o.kt)("inlineCode",{parentName:"p"},"tsconfig.json")," file would be something like this:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "compilerOptions": {\n        "target": "ESNext",\n        "lib": ["DOM", "DOM.Iterable", "ESNext"],\n        "module": "ESNext",\n        "skipLibCheck": true,\n\n        /* Bundler mode */\n        "moduleResolution": "Node",\n        "allowImportingTsExtensions": true,\n        "resolveJsonModule": true,\n        "isolatedModules": true,\n        "noEmit": true,\n        "jsx": "react-jsx",\n\n        /* Linting */\n        "strict": true,\n        "noUnusedLocals": true,\n        "noUnusedParameters": true,\n        "noFallthroughCasesInSwitch": true\n    },\n    "include": ["src"],\n    "references": [{ "path": "./tsconfig.node.json" }]\n}\n'))),(0,o.kt)("h2",{id:"semaphore-groups"},"Semaphore Groups"),(0,o.kt)("h3",{id:"creating-a-group"},"Creating a Group"),(0,o.kt)("p",null,"When you create a group and the transaction is reverted, make sure that the group id you are using does not exist on the network you are using."),(0,o.kt)("p",null,"To check that, you can use the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/semaphore-protocol/semaphore/tree/main/packages/cli"},"Semaphore CLI")," with the command ",(0,o.kt)("inlineCode",{parentName:"p"},"get-groups")," and the network you are using and then, make sure that your group id is not part of that list. You can also use the ",(0,o.kt)("a",{parentName:"p",href:"https://explorer.semaphore.pse.dev/"},"Semaphore explorer"),"."),(0,o.kt)("h2",{id:"semaphore-proofs"},"Semaphore Proofs"),(0,o.kt)("h3",{id:"transaction-reverted-when-using-the-same-external-nullifier"},"Transaction reverted when using the same external nullifier"),(0,o.kt)("p",null,"When you generate a proof using the same external nullifier you used to verify a proof before, the transaction will be reverted because that external nullifier was already used. If you want to send and verify several proofs from the same identity, you should use a different external nullifier each time you generate a proof."))}m.isMDXComponent=!0}}]);